# This is a basic workflow to help you get started with Actions

name: Ctests

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  job:
    name: ${{matrix.os}}-vcpkg
    runs-on: ${{matrix.os}}
    strategy:
      matrix:
        os: [ubuntu-latest,windows-latest,macos-latest]
    steps:
    - uses: actions/checkout@v2
    - uses: seanmiddleditch/gha-setup-ninja@master
    - uses: lukka/run-vcpkg@v10
      with:
        vcpkgGitCommitId: '5568f110b509a9fd90711978a7cb76bae75bb092'
    - name: build
      uses: lukka/run-cmake@v10
      with:
          cmakeListsTxtPath: '${{ github.workspace }}/tests/CMakeLists.txt'
          configurePreset: 'ninja-multi-vcpkg'
          buildPreset: 'ninja-multi-vcpkg'
    - name: run tests
      run: ctest --test-dir tests/builds/ninja-multi-vcpkg
          
  
    
    
